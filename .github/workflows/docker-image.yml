name: CI vers Docker Hub

on:
push:
branches: [ main ]

jobs:
build-and-push:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v2
- name: Building the Docker Image
run: docker build . --file Dockerfile --tag mon-image-docker:$(date +%s)
- name: Connect to the GitHub Container Registry
uses: docker/login-action@v1
with:
registry: ghcr.io
username: ${{ github.repository_owner }}
password: ${{ secrets.CR_PAT }}
- name: Push to GitHub Container Registry
run: docker push ghcr.io/${{ github.repository_owner }}/docker-image:$(date +%s)
